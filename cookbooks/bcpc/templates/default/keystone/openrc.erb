################################################
#
#              Generated by Chef
#
################################################
<%
    @_proto = @node['bcpc']['protocol']['keystone']
    @_dnsdomain = @node['bcpc']['cluster_domain']
    @_port = @node['bcpc']['catalog']['identity']['ports']['admin']
    @_uri = @node['bcpc']['catalog']['identity']['uris']['admin']
%>
<%# Should support either project or domain scoping, preferring project-scope %>
<% if not @project_name.nil? %>
export OS_PROJECT_NAME='<%= @project_name %>'
<% elsif not @domain.nil? %>
export OS_DOMAIN_NAME='<%= @domain %>'
<% end %>
export OS_USERNAME='<%= @username %>'
export OS_PASSWORD='<%= @password %>'
export OS_AUTH_URL=<%= @_proto %>://openstack.<%= @_dnsdomain %>:<%= @_port %>/<%= @_uri %>/
export OS_REGION_NAME='<%= @region || @node['bcpc']['region_name'] %>'
export OS_NO_CACHE=1
export OS_PROJECT_DOMAIN_NAME='<%= @project_domain || @domain %>'
export OS_USER_DOMAIN_NAME='<%= @user_domain || @domain %>'

# API versions in a separate file so that they can be used when bootstrapping Keystone services
. /root/api_versionsrc
